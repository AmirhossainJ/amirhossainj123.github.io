<head>
    <script src="electrame.js"></script>
    <title>Game Test</title>
    <script>
        function randomizer(min,max) {
            return min + Math.floor(Math.random()*(max-min))
        }
    </script>
</head>
<style>
    canvas {
        border: 5px solid black;
    }
</style>
<body>
    <canvas id="game" width="800" height="400"></canvas>
    <script>
        // Config for Physics
        EGRAVITY = false // No gravity
        EFRICTION = true // Yes Friction :)

        key_left = false
        key_up = false
        key_down = false
        key_right = false

        addEventListener("keyup",(e) => {
            switch (e.keyCode) {
                case 37: case 65: key_left = false; break;
                case 38: case 87: key_up = false; break;
                case 39: case 68: key_right = false; break;
                case 40: case 83: key_down = false; break;
            }
        });
        addEventListener("keydown",(e) => {
            switch (e.keyCode) {
                case 37: case 65: key_left = true; break;
                case 38: case 87: key_up = true; break;
                case 39: case 68: key_right = true; break;
                case 40: case 83: key_down = true; break;
            }
        });

        Game = new EGame("game") // Create new game
        Material = new EColors().DARKRED // Material Dark red color for the player
        Material2 = new EColors().BLUE // Material Blue color for the food
        Square = new EObject(50,50,20,20,Material) // Player (Pos_x,Pos_y,Scale_x,Scale_y,Material)
        Square2 = new EObject(25,100,10,10,Material2) // Food (Pos_x,Pos_y,Scale_x,Scale_y,Material)
        function My_Game() {
            setTimeout( (e) => {
                Square = EApplyMotion(Square) // Apply the motions for the physics and forces
                Square2 = EApplyMotion(Square2)
                Square = EApplyPhysicsTo(Square) // Apply friction
                Square2 = EApplyPhysicsTo(Square2)
                if (key_up) {
                    Square = EApplyForce(Square,[0,-0.2],[2,2,-2,-2]) // Apply a force to Square (Object,[Force_to_x_direction,Force_to_y_direction],[Terminal Velocity for different directions])
                }
                if (key_left) {
                    Square = EApplyForce(Square,[-0.2,0],[2,2,-2,-2])
                }
                if (key_down) {
                    Square = EApplyForce(Square,[0,0.2],[2,2,-2,-2])
                }
                if (key_right) {
                    Square = EApplyForce(Square,[0.2,0],[2,2,-2,-2])
                }
                Collision = ECollision(Square,Square2) // Check if they are colided (player ate food)
                if (Collision) {
                    Square2.x = randomizer(20,780) // randomize food location
                    Square2.y = randomizer(20,380)
                }
                EClear(Game) // Clear the screen (get ready to render another one)
                ERender(Game,Square) // Render the Player in Game
                ERender(Game,Square2) // Render the Food in Game
                My_Game() // Loop
            }, 10);
        }
        My_Game()
    </script>
</body>